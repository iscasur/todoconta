---
// src/components/ui/Footer.astro

// Enlaces para las secciones del footer
const footerLinks = {
  services: [
    { name: "Plan Básico", url: "#servicios" },
    { name: "Plan Premium", url: "#servicios" },
    { name: "Plan Empresarial", url: "#servicios" },
    { name: "Declaración Anual", url: "/servicios/declaracion-anual" },
    { name: "Constitución de Empresas", url: "/servicios/constitucion-empresas" },
    { name: "Capacitación", url: "/servicios/capacitacion" }
  ],
  solutions: [
    { name: "Asesoría Online", url: "#asesoria" },
    { name: "Automatización IA", url: "#automatizacion" },
    { name: "Capacitación Fiscal", url: "/soluciones/capacitacion-fiscal" },
    { name: "Consultorías Especializadas", url: "/soluciones/consultorias" },
    { name: "Auditorías Internas", url: "/soluciones/auditorias" },
    { name: "Constitución de Empresas", url: "/soluciones/constitucion" }
  ],
  contact: [
    { name: "📞 (55) 4475-3602", url: "tel:5544753602" },
    { name: "✉️ hola@todoconta.com", url: "mailto:hola@todoconta.com" },
    { name: "💬 Chat WhatsApp", url: "https://wa.me/5215544753602" },
    { name: "📍 Ciudad de México", url: "https://maps.google.com/?q=todoconta+mexico" },
    { name: "🕒 Lun-Sáb 9-18h", url: "#" }
  ],
  legal: [
    { name: "Términos de Servicio", url: "/terminos" },
    { name: "Política de Privacidad", url: "/privacidad" },
    { name: "Aviso Legal", url: "/aviso-legal" }
  ]
};

// Social media links
const socialLinks = [
  { icon: "📘", name: "Facebook", url: "https://facebook.com/todoconta" },
  { icon: "💼", name: "LinkedIn", url: "https://linkedin.com/company/todoconta" },
  { icon: "📺", name: "YouTube", url: "https://youtube.com/c/todoconta" },
  { icon: "💬", name: "WhatsApp", url: "https://wa.me/5215544753602" }
];

// Current year for copyright
const currentYear = new Date().getFullYear();
---

<footer class="footer">
  <div class="container">
    <!-- Newsletter Section -->
    <div class="footer-newsletter">
      <div class="newsletter-content">
        <div class="newsletter-text">
          <h3>📬 Mantente Actualizado</h3>
          <p>Recibe las últimas noticias fiscales, guías prácticas y análisis del sector contable.</p>
        </div>
        <form class="newsletter-form" id="footerNewsletter">
          <input 
            type="email" 
            class="newsletter-input" 
            placeholder="Ingresa tu email profesional" 
            required
            aria-label="Tu email profesional"
          >
          <button type="submit" class="newsletter-button">Suscribirse</button>
        </form>
      </div>
    </div>

    <!-- Main Footer Content -->
    <div class="footer-content">
      <!-- Company Info -->
      <div class="footer-section">
        <h3>Todoconta</h3>
        <p class="footer-description">
          Especialistas en servicios contables integrales y software de gestión fiscal. 
          Más de 15 años brindando tranquilidad fiscal a empresarios mexicanos.
        </p>
        <div class="footer-social">
          {socialLinks.map(social => (
            <a href={social.url} class="social-link" title={social.name} target="_blank" rel="noopener">
              {social.icon}
            </a>
          ))}
        </div>
      </div>

      <!-- Services -->
      <div class="footer-section">
        <h3>Servicios</h3>
        <div class="footer-links">
          {footerLinks.services.map(link => (
            <a href={link.url} class="footer-link">{link.name}</a>
          ))}
        </div>
      </div>

      <!-- Solutions -->
      <div class="footer-section">
        <h3>Soluciones</h3>
        <div class="footer-links">
          {footerLinks.solutions.map(link => (
            <a href={link.url} class="footer-link">{link.name}</a>
          ))}
        </div>
      </div>

      <!-- Contact -->
      <div class="footer-section">
        <h3>Contacto</h3>
        <div class="footer-links">
          {footerLinks.contact.map(link => (
            <a href={link.url} class="footer-link">{link.name}</a>
          ))}
        </div>
      </div>
    </div>

    <!-- Copyright -->
    <div class="footer-bottom">
      <div class="footer-copyright">
        &copy; {currentYear} Todoconta. Todos los derechos reservados.
      </div>
      <div class="footer-legal">
        {footerLinks.legal.map(link => (
          <a href={link.url}>{link.name}</a>
        ))}
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    background: var(--neutral-900);
    color: white;
    padding: var(--space-20) 0 var(--space-8);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-6);
  }

  /* Newsletter */
  .footer-newsletter {
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--border-radius-xl);
    padding: var(--space-8);
    margin-bottom: var(--space-16);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .newsletter-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
    align-items: center;
  }

  .newsletter-text h3 {
    font-family: var(--font-display);
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: white;
    margin-bottom: var(--space-3);
  }

  .newsletter-text p {
    color: rgba(255, 255, 255, 0.8);
    margin: 0;
    font-size: var(--font-size-base);
    line-height: 1.6;
  }

  .newsletter-form {
    display: flex;
    gap: var(--space-4);
  }

  .newsletter-input {
    flex: 1;
    padding: var(--space-4);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius-lg);
    font-size: var(--font-size-base);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    transition: all var(--transition-normal);
  }

  .newsletter-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }

  .newsletter-input:focus {
    outline: none;
    border-color: var(--primary-400);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
    background: rgba(255, 255, 255, 0.15);
  }

  .newsletter-button {
    background: var(--orange-600);
    color: white;
    border: none;
    padding: var(--space-4) var(--space-6);
    border-radius: var(--border-radius-lg);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-normal);
    white-space: nowrap;
    font-family: var(--font-display);
  }

  .newsletter-button:hover {
    background: var(--orange-700);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(234, 88, 12, 0.3);
  }

  /* Main Footer Content */
  .footer-content {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: var(--space-8);
    margin-bottom: var(--space-16);
  }

  .footer-section h3 {
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: white;
    margin-bottom: var(--space-4);
    position: relative;
    padding-bottom: var(--space-2);
  }

  .footer-section h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 2px;
    background: var(--primary-500);
    border-radius: 1px;
  }

  .footer-description {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
    margin-bottom: var(--space-6);
    font-size: var(--font-size-sm);
  }

  .footer-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .footer-link {
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    transition: all var(--transition-normal);
    padding: var(--space-1) 0;
    font-size: var(--font-size-sm);
    display: flex;
    align-items: center;
  }

  .footer-link:hover {
    color: var(--primary-400);
    transform: translateX(var(--space-2));
  }

  .footer-social {
    display: flex;
    gap: var(--space-4);
    margin-top: var(--space-4);
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius-lg);
    color: white;
    text-decoration: none;
    font-size: var(--font-size-lg);
    transition: all var(--transition-normal);
  }

  .social-link:hover {
    background: var(--primary-600);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
  }

  /* Copyright Section */
  .footer-bottom {
    padding-top: var(--space-8);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-4);
  }

  .footer-copyright {
    color: rgba(255, 255, 255, 0.6);
    font-size: var(--font-size-sm);
  }

  .footer-legal {
    display: flex;
    gap: var(--space-6);
  }

  .footer-legal a {
    color: rgba(255, 255, 255, 0.6);
    text-decoration: none;
    font-size: var(--font-size-sm);
    transition: color var(--transition-normal);
  }

  .footer-legal a:hover {
    color: var(--primary-400);
  }

  /* Responsive Styles */
  @media (max-width: 1024px) {
    .footer-content {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-6);
    }
    
    .newsletter-content {
      grid-template-columns: 1fr;
      gap: var(--space-6);
      text-align: center;
    }
  }

  @media (max-width: 768px) {
    .footer-content {
      grid-template-columns: 1fr;
      text-align: center;
    }
    
    .footer-section h3::after {
      left: 50%;
      transform: translateX(-50%);
    }
    
    .footer-newsletter-form {
      flex-direction: column;
    }
    
    .footer-bottom {
      flex-direction: column;
      text-align: center;
      gap: var(--space-4);
    }
    
    .footer-legal {
      justify-content: center;
    }
    
    .footer-social {
      justify-content: center;
    }
    
    .footer-link:hover {
      transform: none;
    }
    
    .newsletter-form {
      flex-direction: column;
    }
  }

  @media (max-width: 480px) {
    .footer-legal {
      flex-direction: column;
      gap: var(--space-3);
    }
  }
</style>

<script>
  // Script para manejar el formulario de newsletter
  document.addEventListener('DOMContentLoaded', () => {
    const newsletterForm = document.getElementById('footerNewsletter');
    
    if (newsletterForm) {
      newsletterForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const emailInput = newsletterForm.querySelector('.newsletter-input');
        const submitButton = newsletterForm.querySelector('.newsletter-button');
        const originalButtonText = submitButton.textContent;
        
        // Cambiar texto del botón durante el envío
        submitButton.textContent = 'Enviando...';
        submitButton.disabled = true;
        
        try {
          // Simular envío (reemplazar con tu lógica real)
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          // Mostrar mensaje de éxito
          const formContainer = newsletterForm.parentElement;
          formContainer.innerHTML = `
            <div class="success-message">
              <h4>¡Gracias por suscribirte! 🎉</h4>
              <p>Recibirás nuestro próximo boletín con novedades fiscales y contables.</p>
            </div>
          `;
        } catch (error) {
          // Restaurar botón y mostrar error
          submitButton.textContent = originalButtonText;
          submitButton.disabled = false;
          
          // Añadir mensaje de error debajo del formulario
          const errorDiv = document.createElement('div');
          errorDiv.className = 'newsletter-error';
          errorDiv.textContent = 'No pudimos completar tu suscripción. Por favor, inténtalo de nuevo.';
          errorDiv.style.color = '#ef4444';
          errorDiv.style.marginTop = '8px';
          errorDiv.style.fontSize = '14px';
          
          newsletterForm.appendChild(errorDiv);
        }
      });
    }
  });
</script>