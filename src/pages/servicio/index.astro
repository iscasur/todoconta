---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import ServiceCard from '../../components/service/ServiceCard.astro';
import Hero from '../../components/sections/Hero.astro';

// Obtener todos los servicios
const services = await getCollection('services');

// Ordenar servicios: primero los destacados, luego por precio (menor a mayor)
const sortedServices = services.sort((a, b) => {
  // Primero por featured
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  
  // Luego por precio
  return a.data.monthlyPrice - b.data.monthlyPrice;
});
---

<Layout 
  title="Servicios Contables para Empresas y Personas F√≠sicas | Todoconta" 
  description="Conoce nuestros planes de servicios contables dise√±ados para cada etapa de tu negocio. Desde el plan b√°sico hasta soluciones empresariales a medida."
>
  <!-- Hero Section -->
  <Hero 
    title="Servicios Contables a tu Medida"
    subtitle="Planes dise√±ados para cada etapa de tu negocio, con atenci√≥n personalizada y precios transparentes."
    ctaText="Contactar Ahora"
    ctaUrl="/contacto"
    secondaryCtaText="Ver Planes"
    secondaryCtaUrl="#planes"
  />
  
  <!-- Services Introduction -->
  <section class="services-intro">
    <div class="container">
      <div class="intro-content">
        <h2 class="section-title">Contabilidad sin Complicaciones</h2>
        <p class="section-subtitle">
          En Todoconta nos especializamos en hacer que la contabilidad y los impuestos sean 
          procesos sencillos y transparentes para ti. Nuestros planes est√°n dise√±ados para 
          adaptarse a tus necesidades espec√≠ficas y etapa de crecimiento.
        </p>
        
        <div class="value-props">
          <div class="value-prop">
            <div class="value-icon">‚è±Ô∏è</div>
            <h3>Ahorra Tiempo</h3>
            <p>Dedica tu tiempo a hacer crecer tu negocio mientras nosotros nos encargamos de tu contabilidad.</p>
          </div>
          
          <div class="value-prop">
            <div class="value-icon">üí∞</div>
            <h3>Optimiza Impuestos</h3>
            <p>Implementamos estrategias fiscales legales para minimizar tu carga tributaria.</p>
          </div>
          
          <div class="value-prop">
            <div class="value-icon">üõ°Ô∏è</div>
            <h3>Tranquilidad Fiscal</h3>
            <p>Garantizamos el cumplimiento de todas tus obligaciones fiscales en tiempo y forma.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Services Grid -->
  <section class="services-grid" id="planes">
    <div class="container">
      <h2 class="section-title text-center">Nuestros Planes de Servicio</h2>
      <p class="section-subtitle text-center">
        Selecciona el plan que mejor se adapte a las necesidades de tu negocio
      </p>
      
      <div class="services-container">
        {sortedServices.map(service => (
          <ServiceCard
            title={service.data.title}
            description={service.data.description}
            price={service.data.monthlyPrice}
            priceNote={service.data.priceNote || ""}
            badge={service.data.badge}
            featured={service.data.featured}
            recommendedFor={service.data.recommendedFor}
            features={service.data.includedFeatures.slice(0, 5)} // Mostrar solo las primeras 5 caracter√≠sticas
            ctaText={service.data.ctaText}
            ctaUrl={`/servicio/${service.slug}`}
            slug={service.slug}
          />
        ))}
      </div>
      
      <div class="custom-plan-cta">
        <div class="custom-plan-content">
          <h3>¬øNecesitas un plan personalizado?</h3>
          <p>
            Si ninguno de nuestros planes est√°ndar se ajusta a tus necesidades espec√≠ficas, 
            podemos crear un plan a la medida para tu empresa.
          </p>
          <a href="/contacto?tema=plan-personalizado" class="btn btn-outline">Solicitar Plan a Medida</a>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Why Choose Us -->
  <section class="why-choose-us">
    <div class="container">
      <div class="why-choose-content">
        <div class="why-choose-text">
          <h2 class="section-title">¬øPor qu√© elegir nuestros servicios?</h2>
          
          <ul class="benefits-list">
            <li>
              <span class="benefit-icon">‚úì</span>
              <div class="benefit-text">
                <h3>Contadores Certificados</h3>
                <p>Nuestro equipo est√° formado por contadores p√∫blicos certificados con amplia experiencia.</p>
              </div>
            </li>
            
            <li>
              <span class="benefit-icon">‚úì</span>
              <div class="benefit-text">
                <h3>Atenci√≥n Personalizada</h3>
                <p>Te asignamos un contador dedicado que conocer√° a fondo tu negocio.</p>
              </div>
            </li>
            
            <li>
              <span class="benefit-icon">‚úì</span>
              <div class="benefit-text">
                <h3>Tecnolog√≠a Avanzada</h3>
                <p>Utilizamos software especializado para maximizar la eficiencia y precisi√≥n.</p>
              </div>
            </li>
            
            <li>
              <span class="benefit-icon">‚úì</span>
              <div class="benefit-text">
                <h3>Garant√≠a de Satisfacci√≥n</h3>
                <p>Cubrimos el costo de multas causadas por errores en nuestro servicio.</p>
              </div>
            </li>
            
            <li>
              <span class="benefit-icon">‚úì</span>
              <div class="benefit-text">
                <h3>Disponibilidad Constante</h3>
                <p>Soporte v√≠a WhatsApp, correo y videollamadas cuando lo necesites.</p>
              </div>
            </li>
          </ul>
        </div>
        
        <div class="why-choose-image">
          <img src="/images/services/contadores-trabajando.jpg" alt="Equipo de contadores profesionales" class="rounded-image">
        </div>
      </div>
    </div>
  </section>
  
  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="container">
      <h2 class="section-title text-center">Preguntas Frecuentes</h2>
      
      <div class="faq-grid">
        <div class="faq-item">
          <h3 class="faq-question">¬øC√≥mo funciona el proceso de onboarding?</h3>
          <p class="faq-answer">
            El proceso de onboarding comienza con una reuni√≥n inicial donde recopilamos toda la informaci√≥n necesaria 
            de tu empresa. Luego configuramos los accesos a tus plataformas, revisamos tu situaci√≥n fiscal actual y 
            establecemos un plan de trabajo personalizado.
          </p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">¬øPuedo cambiar de plan si mi negocio crece?</h3>
          <p class="faq-answer">
            S√≠, puedes actualizar a un plan superior en cualquier momento. Haremos un ajuste proporcional considerando 
            lo que ya has pagado en tu plan actual y lo que corresponde al nuevo plan. El proceso es sencillo y te 
            acompa√±amos en toda la transici√≥n.
          </p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">¬øC√≥mo se manejan las facturas y documentos fiscales?</h3>
          <p class="faq-answer">
            Te proporcionamos acceso a un portal donde puedes subir tus facturas y documentos fiscales. Tambi√©n 
            podemos configurar la descarga autom√°tica de tus facturas del portal del SAT. Todos los documentos 
            son procesados y organizados por nuestro equipo.
          </p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">¬øQu√© software utilizan para el servicio contable?</h3>
          <p class="faq-answer">
            Utilizamos software contable especializado como ContpaQi y XMLSAT Premium para procesar tu informaci√≥n 
            fiscal de manera eficiente. Adem√°s, contamos con herramientas propias desarrolladas internamente para 
            optimizar los procesos contables.
          </p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">¬øQu√© sucede si recibo una notificaci√≥n del SAT?</h3>
          <p class="faq-answer">
            Si recibes una notificaci√≥n del SAT, simplemente reenv√≠ala a tu contador asignado. Analizaremos la 
            situaci√≥n, te explicaremos de qu√© se trata y nos encargaremos de dar respuesta en tiempo y forma. 
            Te acompa√±amos en todo el proceso para resolver cualquier requerimiento.
          </p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">¬øOfrecen servicios adicionales no incluidos en los planes?</h3>
          <p class="faq-answer">
            S√≠, ofrecemos servicios adicionales como consultor√≠a fiscal especializada, representaci√≥n ante auditor√≠as, 
            implementaci√≥n de estrategias fiscales avanzadas, entre otros. Estos servicios pueden contratarse de manera 
            individual seg√∫n tus necesidades espec√≠ficas.
          </p>
        </div>
      </div>
      
      <div class="faq-cta">
        <p>¬øTienes m√°s preguntas?</p>
        <a href="/contacto" class="btn btn-primary">Cont√°ctanos</a>
      </div>
    </div>
  </section>
  
  <!-- Testimonials -->
  <section class="testimonials-section">
    <div class="container">
      <h2 class="section-title text-center">Lo que dicen nuestros clientes</h2>
      
      <div class="testimonials-slider">
        <div class="testimonial-card">
          <div class="testimonial-content">
            <p class="testimonial-quote">
              "Desde que contratamos los servicios de Todoconta, podemos enfocarnos en hacer crecer 
              nuestro negocio sin preocuparnos por los temas fiscales. Su atenci√≥n personalizada y 
              profesionalismo han superado nuestras expectativas."
            </p>
            <div class="testimonial-author">
              <img src="/images/testimonials/cliente1.jpg" alt="Laura M√©ndez" class="author-avatar">
              <div class="author-info">
                <h4>Laura M√©ndez</h4>
                <p>Directora General, Innovatech</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="testimonial-card">
          <div class="testimonial-content">
            <p class="testimonial-quote">
              "Lo que m√°s valoro de Todoconta es su capacidad para explicar temas fiscales complejos 
              de manera sencilla. Siempre est√°n disponibles para resolver mis dudas y me han ayudado 
              a optimizar la carga fiscal de mi negocio."
            </p>
            <div class="testimonial-author">
              <img src="/images/testimonials/cliente2.jpg" alt="Roberto S√°nchez" class="author-avatar">
              <div class="author-info">
                <h4>Roberto S√°nchez</h4>
                <p>Emprendedor, RS Consulting</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="testimonial-card">
          <div class="testimonial-content">
            <p class="testimonial-quote">
              "Despu√©s de trabajar con varios despachos contables, finalmente encontramos en Todoconta 
              un servicio confiable y eficiente. Su enfoque proactivo y su conocimiento del sector nos 
              han ahorrado tiempo y dinero."
            </p>
            <div class="testimonial-author">
              <img src="/images/testimonials/cliente3.jpg" alt="Elena Torres" class="author-avatar">
              <div class="author-info">
                <h4>Elena Torres</h4>
                <p>CFO, Constructora Habitat</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">¬øListo para simplificar tu contabilidad?</h2>
        <p class="cta-description">
          Elige el plan que mejor se adapte a tus necesidades y comienza a disfrutar 
          de tranquilidad fiscal con nuestro servicio contable profesional.
        </p>
        <div class="cta-buttons">
          <a href="#planes" class="btn btn-primary">Ver Planes</a>
          <a href="/contacto" class="btn btn-secondary">Contactar Ahora</a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Estilos espec√≠ficos para la p√°gina de servicios */
  .services-intro {
    padding: var(--space-16) 0;
    background-color: var(--bg-secondary);
  }
  
  .intro-content {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
  }
  
  .value-props {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-6);
    margin-top: var(--space-10);
  }
  
  .value-prop {
    background-color: var(--bg-primary);
    border-radius: var(--border-radius-xl);
    padding: var(--space-6);
    text-align: center;
    box-shadow: var(--shadow-md);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  }
  
  .value-prop:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }
  
  .value-icon {
    font-size: var(--font-size-3xl);
    margin-bottom: var(--space-4);
  }
  
  .value-prop h3 {
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--neutral-900);
    margin-bottom: var(--space-2);
  }
  
  .value-prop p {
    color: var(--neutral-600);
  }
  
  .services-grid {
    padding: var(--space-20) 0;
  }
  
  .services-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-10);
  }
  
  .custom-plan-cta {
    margin-top: var(--space-16);
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-800) 100%);
    border-radius: var(--border-radius-2xl);
    padding: var(--space-8);
    color: white;
    text-align: center;
  }
  
  .custom-plan-content {
    max-width: 600px;
    margin: 0 auto;
  }
  
  .custom-plan-content h3 {
    font-family: var(--font-display);
    font-size: var(--font-size-2xl);
    font-weight: 700;
    margin-bottom: var(--space-4);
  }
  
  .custom-plan-content p {
    margin-bottom: var(--space-6);
    font-size: var(--font-size-lg);
    opacity: 0.9;
  }
  
  .btn-outline {
    background-color: transparent;
    color: white;
    border: 2px solid white;
    padding: var(--space-3) var(--space-6);
    border-radius: var(--border-radius-lg);
    font-weight: 600;
    transition: all var(--transition-normal);
    display: inline-flex;
    text-decoration: none;
  }
  
  .btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
    transform: translateY(-3px);
  }
  
  .why-choose-us {
    padding: var(--space-20) 0;
    background-color: var(--bg-secondary);
  }
  
  .why-choose-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-10);
    align-items: center;
  }
  
  .benefits-list {
    list-style: none;
    padding: 0;
  }
  
  .benefits-list li {
    display: flex;
    align-items: flex-start;
    margin-bottom: var(--space-6);
  }
  
  .benefit-icon {
    background-color: var(--green-500);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: var(--space-4);
    flex-shrink: 0;
    margin-top: var(--space-1);
  }
  
  .benefit-text h3 {
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--neutral-900);
    margin-bottom: var(--space-2);
  }
  
  .benefit-text p {
    color: var(--neutral-600);
  }
  
  .rounded-image {
    border-radius: var(--border-radius-2xl);
    box-shadow: var(--shadow-lg);
    width: 100%;
    height: auto;
  }
  
  .faq-section {
    padding: var(--space-20) 0;
  }
  
  .faq-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-10);
  }
  
  .faq-item {
    background-color: var(--bg-primary);
    border-radius: var(--border-radius-xl);
    padding: var(--space-6);
    box-shadow: var(--shadow-md);
  }
  
  .faq-question {
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--neutral-900);
    margin-bottom: var(--space-3);
  }
  
  .faq-answer {
    color: var(--neutral-600);
  }
  
  .faq-cta {
    margin-top: var(--space-12);
    text-align: center;
  }
  
  .faq-cta p {
    font-size: var(--font-size-lg);
    margin-bottom: var(--space-4);
  }
  
  .testimonials-section {
    padding: var(--space-20) 0;
    background-color: var(--primary-50);
  }
  
  .testimonials-slider {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-6);
    margin-top: var(--space-10);
  }
  
  .testimonial-card {
    background-color: white;
    border-radius: var(--border-radius-xl);
    padding: var(--space-6);
    box-shadow: var(--shadow-md);
    height: 100%;
  }
  
  .testimonial-content {
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  
  .testimonial-quote {
    flex-grow: 1;
    color: var(--neutral-700);
    font-style: italic;
    position: relative;
    padding-left: var(--space-4);
    margin-bottom: var(--space-6);
  }
  
  .testimonial-quote::before {
    content: '"';
    position: absolute;
    left: -10px;
    top: -10px;
    font-size: var(--font-size-4xl);
    color: var(--primary-300);
    font-family: serif;
  }
  
  .testimonial-author {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }
  
  .author-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
  }
  
  .author-info h4 {
    font-family: var(--font-display);
    font-weight: 600;
    color: var(--neutral-900);
    margin: 0;
  }
  
  .author-info p {
    color: var(--neutral-500);
    font-size: var(--font-size-sm);
    margin: 0;
  }
  
  .cta-section {
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-800) 100%);
    color: white;
    padding: var(--space-16) 0;
    text-align: center;
  }
  
  .cta-content {
    max-width: 700px;
    margin: 0 auto;
  }
  
  .cta-title {
    font-family: var(--font-display);
    font-size: var(--font-size-3xl);
    font-weight: 700;
    margin-bottom: var(--space-4);
  }
  
  .cta-description {
    font-size: var(--font-size-lg);
    margin-bottom: var(--space-8);
    opacity: 0.9;
  }
  
  .cta-buttons {
    display: flex;
    gap: var(--space-4);
    justify-content: center;
  }
  
  .btn-primary {
    background-color: white;
    color: var(--primary-700);
    padding: var(--space-3) var(--space-6);
    border-radius: var(--border-radius-lg);
    font-weight: 600;
    transition: all var(--transition-normal);
    display: inline-flex;
    text-decoration: none;
  }
  
  .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
  }
  
  .btn-secondary {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    padding: var(--space-3) var(--space-6);
    border-radius: var(--border-radius-lg);
    font-weight: 600;
    transition: all var(--transition-normal);
    display: inline-flex;
    text-decoration: none;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  
  .btn-secondary:hover {
    background-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-3px);
  }
  
  /* Responsive Adjustments */
  @media (max-width: 768px) {
    .why-choose-content {
      grid-template-columns: 1fr;
    }
    
    .why-choose-image {
      order: -1;
      margin-bottom: var(--space-8);
    }
    
    .faq-grid {
      grid-template-columns: 1fr;
    }
    
    .cta-buttons {
      flex-direction: column;
      align-items: center;
    }
    
    .cta-buttons a {
      width: 100%;
      max-width: 300px;
      justify-content: center;
    }
  }
</style>